{"version":3,"sources":["webpack://proto-player/./src/proto-player/style.css","webpack://proto-player/./node_modules/css-loader/dist/runtime/api.js","webpack://proto-player/webpack/bootstrap","webpack://proto-player/webpack/runtime/compat get default export","webpack://proto-player/webpack/runtime/define property getters","webpack://proto-player/webpack/runtime/hasOwnProperty shorthand","webpack://proto-player/./src/proto-player/player.js","webpack://proto-player/./src/proto-player/index.js"],"names":["___CSS_LOADER_EXPORT___","i","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Player","HTMLElement","super","shadowRoot","attachShadow","mode","innerHTML","_emailSent","_videoElement","querySelector","_overlayElement","_inputElement","parentElement","onsubmit","e","preventDefault","email","value","window","alert","style","display","play","addEventListener","currentTime","showEmailForm","pause","focus","name","oldValue","newValue","src","elementTag","customElements","define"],"mappings":"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","file":"proto-player-9e8f93b630f4377a14db.min.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":host {  display: block;}.wrapper {  position: relative;  margin: 0;  padding: 0;  border: none;  min-width: 250px;}.overlay {  position: absolute;  background-color: rgba(50, 50, 50, 0.5);  width: 100%;  height: calc(100% - 4px);  z-index: 1;  text-align: center;  color: #F0F0F0;  display: none;}.overlay>h2 {  padding: 0.5em;}@media (max-width: 680px) {  .overlay>h2 {    font-size: 1.2em;    margin-bottom: 0.4em;  }}@media (max-width: 480px) {  .overlay>h2 {    font-size: 1em;    margin-bottom: 0.2em;  }}@media (max-width: 360px) {  .overlay>h2 {    font-size: 0.8em;    margin-bottom: 0.1em;    margin-top: 0.1em;  }}.overlay input {  outline: none;  border-radius: 10px;  padding: 8px;}video {  width: 100%;  outline: none;}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","/**\n * Proto-Player\n *\n * Copyright (C) 2020, Loïc Le Page\n * Released under the MIT license.\n */\n\nimport css from \"./style.css\";\n\nconst maxTimestamp = 10.0;\n\nexport default class Player extends HTMLElement\n{\n    static get observedAttributes()\n    {\n        return [\"src\"];\n    }\n\n    constructor()\n    {\n        super();\n        const shadowRoot = this.attachShadow({ mode: \"closed\" });\n\n        shadowRoot.innerHTML = `\n        <style>${css.toString()}</style>\n        <div class=\"wrapper\">\n            <div class=\"overlay\">\n                <h2>To keep on watching this video, please enter your email address below:</h2>\n                <form>\n                    <input type=\"email\" placeholder=\"Enter your email...\" />\n                </form>\n            </div>\n            <video controls controlslist=\"nofullscreen nodownload noremoteplayback\" autoplay playsinline muted disablePictureInPicture disableRemotePlayback></video>\n        </div>`;\n\n        this._emailSent = false;\n        this._videoElement = shadowRoot.querySelector(\"video\");\n        this._overlayElement = shadowRoot.querySelector(\".overlay\");\n        this._inputElement = this._overlayElement.querySelector(\"input\");\n\n        this._inputElement.parentElement.onsubmit = (e) =>\n        {\n            e.preventDefault();\n            const email = this._inputElement.value;\n            if (email)\n            {\n                // TODO: send email to server\n                window.alert(`Registering email: ${email}`);\n\n                this._emailSent = true;\n                this._inputElement.value = \"\";\n                this._overlayElement.style.display = \"none\";\n                this._videoElement.play();\n            }\n        };\n\n        this._videoElement.addEventListener(\"timeupdate\", () =>\n        {\n            if (!this._emailSent && (this._videoElement.currentTime > maxTimestamp))\n            {\n                this.showEmailForm();\n                this._videoElement.currentTime = maxTimestamp;\n            }\n        });\n    }\n\n    showEmailForm()\n    {\n        this._videoElement.pause();\n        this._overlayElement.style.display = \"block\";\n        this._inputElement.focus();\n    }\n\n    attributeChangedCallback(name, oldValue, newValue)\n    {\n        if ((name === \"src\") && (newValue !== oldValue))\n        {\n            this._emailSent = false;\n            this._inputElement.value = \"\";\n            this._overlayElement.style.display = \"none\";\n            this._videoElement.src = newValue;\n            this._videoElement.currentTime = 0;\n            this._videoElement.play();\n        }\n    }\n}\n","/**\n * Proto-Player\n *\n * Copyright (C) 2020, Loïc Le Page\n * Released under the MIT license.\n */\n\nimport Player from \"./player\";\n\nconst elementTag = \"proto-player\";\nif (!window.customElements.get(elementTag))\n{\n    window.customElements.define(elementTag, Player);\n}\n"],"sourceRoot":""}